$(document).ready(function(){function fetch(){$.ajax({url:"<?php echo base_url(); ?>fetch",type:"post",dataType:"json",success:function(data){var i;"success"==data.responce?(i="1",$("#records").DataTable({data:data.posts,responsive:!0,dom:"<'row'<'col-sm-12 col-md-4'l><'col-sm-12 col-md-4'B><'col-sm-12 col-md-4'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-12 col-md-5'i><'col-sm-12 col-md-7'p>>",buttons:["copy","excel","pdf"],columns:[{render:function(){return a=i++}},{data:"name"},{data:"email"},{render:function(data,type,row,meta){return`
                                    <a href="#" value="${row.id}" id="del" class="btn btn-sm btn-outline-danger"><i class="fas fa-trash"></i></a>
                                    <a href="#" value="${row.id}" id="edit" class="btn btn-sm btn-outline-success"><i class="fas fa-edit"></i></a>
                            `}}]})):toastr.error(data.message)}})}$(document).on("click","#add",function(e){e.preventDefault();var e=$("#name").val(),email=$("#email").val();""==e||""==email?alert("Both field is required"):($.ajax({url:"<?php echo base_url(); ?>insert",type:"post",dataType:"json",data:{name:e,email:email},success:function(data){"success"==data.responce?($("#records").DataTable().destroy(),fetch(),$("#exampleModal").modal("hide"),toastr.success(data.message)):toastr.error(data.message)}}),$("#form")[0].reset())}),fetch(),$(document).on("click","#del",function(e){e.preventDefault();var del_id=$(this).attr("value");let swalWithBootstrapButtons=Swal.mixin({customClass:{confirmButton:"btn btn-success",cancelButton:"btn btn-danger mr-2"},buttonsStyling:!1});swalWithBootstrapButtons.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, cancel!",reverseButtons:!0}).then(result=>{result.value?$.ajax({url:"<?php echo base_url(); ?>delete",type:"post",dataType:"json",data:{del_id:del_id},success:function(data){"success"==data.responce?($("#records").DataTable().destroy(),fetch(),swalWithBootstrapButtons.fire("Deleted!","Your file has been deleted.","success")):swalWithBootstrapButtons.fire("Cancelled","Your imaginary file is safe :)","error")}}):result.dismiss===Swal.DismissReason.cancel&&swalWithBootstrapButtons.fire("Cancelled","Your imaginary file is safe :)","error")})}),$(document).on("click","#edit",function(e){e.preventDefault();e=$(this).attr("value");$.ajax({url:"<?php echo base_url(); ?>edit",type:"post",dataType:"json",data:{edit_id:e},success:function(data){"success"==data.responce?($("#edit_modal").modal("show"),$("#edit_record_id").val(data.post.id),$("#edit_name").val(data.post.name),$("#edit_email").val(data.post.email)):toastr.error(data.message)}})}),$(document).on("click","#update",function(e){e.preventDefault();var e=$("#edit_record_id").val(),edit_name=$("#edit_name").val(),edit_email=$("#edit_email").val();""==e||""==edit_name||""==edit_email?alert("Both field is required"):$.ajax({url:"<?php echo base_url(); ?>update",type:"post",dataType:"json",data:{edit_record_id:e,edit_name:edit_name,edit_email:edit_email},success:function(data){"success"==data.responce?($("#records").DataTable().destroy(),fetch(),$("#edit_modal").modal("hide"),toastr.success(data.message)):toastr.error(data.message)}})})});